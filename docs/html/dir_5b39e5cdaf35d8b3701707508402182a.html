<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EQUATOR: .venv/Lib/site-packages/equator_qa Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EQUATOR<span id="projectnumber">&#160;0.0.6</span>
   </div>
   <div id="projectbrief">Question and Answer Evaluation of LLMs</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_5b39e5cdaf35d8b3701707508402182a.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">equator_qa Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Directory dependency graph for equator_qa:</div>
<div class="dyncontent">
<div class="center"><img src="dir_5b39e5cdaf35d8b3701707508402182a_dep.png" border="0" usemap="#adir__5b39e5cdaf35d8b3701707508402182a__dep" alt=".venv/Lib/site-packages/equator_qa"/></div>
<map name="adir__5b39e5cdaf35d8b3701707508402182a__dep" id="adir__5b39e5cdaf35d8b3701707508402182a__dep">
<area shape="rect" href="dir_d919aa58bc7635d41d5d873c46c3f7d8.html" title="tests" alt="" coords="147,64,197,91"/>
<area shape="rect" href="dir_5b39e5cdaf35d8b3701707508402182a.html" alt="" coords="27,53,208,101"/>
<area shape="rect" href="dir_57fe89998858e16a6b60593775c2a86c.html" title="site&#45;packages" alt="" coords="16,16,219,112"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_d919aa58bc7635d41d5d873c46c3f7d8.html">tests</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="____init_____8py.html">__init__.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charting_8py.html">charting.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="llmscalls_8py.html">llmscalls.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stats_8py.html">stats.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8py.html">utils.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vectordb_8py.html">vectordb.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>The <b>EQUATOR Evaluator</b> is a robust framework designed to systematically evaluate the factual accuracy and reasoning capabilities of large language models (LLMs). Unlike traditional evaluation methods, which often prioritize fluency over accuracy, this tool employs a <b>deterministic scoring system</b> that ensures precise and unbiased assessment of LLM-generated responses.</p>
<p>This repository implements the methodology described in the research paper "EQUATOR: A Deterministic Framework for
Evaluating LLM Reasoning with Open-EndedQuestions. # v1.0.0-beta"(Bernard et al., 2024). By leveraging vector databases and smaller, locally hosted LLMs, the LLM Evaluator bridges the gap between scalability and accuracy in automated assessments.</p>
<p>Study paper: <a href="https://arxiv.org/abs/2501.00257">ArVix Study</a></p>
<p><img src="EQUATOR-Framework.png" alt="Equator Framework" title="EQUATOR: A Deterministic Framework for Evaluating LLM Reasoning" class="inline"/></p>
<hr  />
<p>Youtube Videos:</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Explainer Video</h1>
<p><a href="https://www.youtube.com/watch?v=ryTRe18UHXE">Short explainer video</a></p>
<p><a href="https://www.youtube.com/watch?v=FVVAPXlRvPg">Deep Dive Podcast video</a></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Demo Video</h1>
<p><a href="https://youtu.be/e-uU_PaVDMM">EQUATOR installation and demo video</a></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Key Features</h1>
<ol type="1">
<li><b>Deterministic Scoring</b>: Assigns binary scores (100% or 0%) based solely on factual correctness.</li>
<li><b>Vector Database Integration</b>: Embeds open-ended questions and human-evaluated answers for semantic matching.</li>
<li><b>Automated Evaluation</b>: Uses smaller LLMs to provide scalable and efficient assessments.</li>
<li><b>Bias Mitigation</b>: Eliminates scoring biases related to linguistic fluency or persuasion.</li>
<li><b>Cost Efficiency</b>: Optimizes token usage, significantly reducing operational costs for evaluation.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md7"></a>
Why LLM Evaluator?</h1>
<p>Traditional methods, like multiple-choice or human evaluation, fail to capture the nuanced reasoning and factual accuracy required in high-stakes domains such as medicine or law. The LLM Evaluator:</p>
<ul>
<li>Focuses on <b>factual correctness</b> over linguistic style.</li>
<li>Reduces reliance on human evaluators by automating the grading process.</li>
<li>Provides insights into where LLMs fall short, enabling targeted improvements in model training.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md9"></a>
Methodology</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
1. Deterministic Scoring Framework</h2>
<p>The scoring framework evaluates LLM-generated answers against a vector database of human-evaluated responses. It follows these steps:</p><ol type="1">
<li><b>Embed Inputs</b>: Convert questions and answers into vector embeddings using models like <code>all-minilm</code>.</li>
<li><b>Retrieve Closest Match</b>: Identify the most semantically similar answer key using cosine similarity.</li>
<li><b>Binary Scoring</b>: Assign 100% if the student’s answer matches the answer key; otherwise, 0%.</li>
</ol>
<h2><a class="anchor" id="autotoc_md11"></a>
2. Vector Database</h2>
<p>The vector database, implemented with ChromaDB, stores embeddings of open-ended questions and their corresponding answer keys. This database serves as the single source of truth for evaluations.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
3. Evaluator LLM</h2>
<p>A smaller LLM (e.g., LLaMA 3.2B) acts as the evaluator, ensuring strict adherence to the scoring criteria while reducing computational overhead.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md14"></a>
Details of features</h1>
<p>We classify LLMS as evaluators and students Eluator LLMS evaluate the "student models " in the case the STOA models found on OpenRouter (276Below is an updated “Evaluator vs. Student” matrix that includes <b>Groq → Ollama</b> support as well.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md16"></a>
Evaluator vs. Student Matrix</h1>
<p>Below is a <b>simplified, Markdown-friendly</b> version of the calculations, using concise bullet points and inline code for all arithmetic.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md18"></a>
A. <b>Current Support</b></h1>
<h2><a class="anchor" id="autotoc_md19"></a>
1. Ollama Evaluator Combinations</h2>
<ul>
<li><b>Ollama → OpenRouter Students:</b> <br  />
 <code>34,925 × 293 = 10,232,275</code></li>
<li><b>Ollama → Groq Students:</b> <br  />
 <code>34,925 × 14 = 488,950</code></li>
<li><b>Ollama → Ollama Students:</b> <br  />
 <code>34,925 × 34,925 = 1,219,755,625</code></li>
</ul>
<p><b>Subtotal (Ollama Evaluators):</b> <br  />
 </p><div class="fragment"><div class="line">10,232,275 + 488,950 + 1,219,755,625</div>
<div class="line">= 1,230,476,850</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md21"></a>
2. Groq Evaluator Combinations</h2>
<ul>
<li><b>Groq → OpenRouter Students:</b> <br  />
 <code>14 × 293 = 4,102</code></li>
<li><b>Groq → Ollama Students:</b> <br  />
 <code>14 × 34,925 = 488,950</code></li>
</ul>
<p><b>Subtotal (Groq Evaluators):</b> <br  />
 </p><div class="fragment"><div class="line">4,102 + 488,950</div>
<div class="line">= 493,052</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md23"></a>
3. Total <em>Current</em> Combinations</h2>
<div class="fragment"><div class="line">1,230,476,850 (Ollama)</div>
<div class="line">+ 493,052 (Groq)</div>
<div class="line">= 1,230,969,902</div>
<div class="line">≈ 1,230,970,000</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md25"></a>
B. <b>Future Support (Next Release)</b></h1>
<ul>
<li><b>Groq → Groq Students:</b> <br  />
 <code>14 × 14 = 196</code></li>
<li><b>OpenRouter → OpenRouter Students:</b> <br  />
 <code>293 × 293 = 85,849</code></li>
</ul>
<p><b>Total Future Combinations:</b> <br  />
 </p><div class="fragment"><div class="line">196 + 85,849</div>
<div class="line">= 86,045</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md27"></a>
4. <b>Grand Total of Possible Evaluator-Student Combinations</b></h1>
<ol type="1">
<li><b>Currently Supported:</b> <br  />
 <div class="fragment"><div class="line">1,230,969,902</div>
<div class="line">≈ 1,230,970,000</div>
</div><!-- fragment --></li>
<li><b>With Next Release:</b> <br  />
 <div class="fragment"><div class="line">1,230,969,902 + 86,045</div>
<div class="line">= 1,231,055,947</div>
<div class="line">≈ 1,231,056,000</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md29"></a>
<b>Final Figures</b></h2>
<ul>
<li><b>Currently Supported:</b> <b>1,230,970,000</b> (rounded) <br  />
</li>
<li><b>With Next Release:</b> <b>1,231,056,000</b> (rounded)</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
<b>5. Summary</b></h1>
<ul>
<li><b>Total Supported Combinations (Current):</b> <br  />
 **~1.23 Billion Evaluator-Student Pairs**</li>
<li><b>Additional Combinations (Next Release):</b> <br  />
 **~86,045 Evaluator-Student Pairs**</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md32"></a>
<b>6. Implications for Testing</b></h1>
<p>With <b>over 1.23 billion</b> possible Evaluator-Student pairs currently supported, comprehensive testing would involve an extensive and potentially resource-intensive process. Here's how you might approach it:</p>
<h2><a class="anchor" id="autotoc_md33"></a>
<b>A. Prioritization Strategies:</b></h2>
<ol type="1">
<li><b>Model Importance:</b> Focus on evaluating high-impact or frequently used models first.</li>
<li><b>Diversity:</b> Ensure a diverse range of model families and sizes are tested to cover different capabilities and use cases.</li>
<li><b>Incremental Testing:</b> Start with a subset of combinations and gradually expand.</li>
</ol>
<h2><a class="anchor" id="autotoc_md34"></a>
<b>B. Automation and Parallelization:</b></h2>
<ul>
<li>Utilize automated testing frameworks to handle large-scale evaluations.</li>
<li>Leverage parallel processing to distribute the workload across multiple machines or instances.</li>
</ul>
<h2><a class="anchor" id="autotoc_md35"></a>
<b>C. Sampling Techniques:</b></h2>
<ul>
<li>Instead of exhaustively testing all combinations, use statistical sampling methods to select representative pairs for evaluation.</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
<b>D. Continuous Integration:</b></h2>
<ul>
<li>Implement continuous testing pipelines that automatically evaluate new combinations as models are added or updated.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md38"></a>
<b>7. Recommendations</b></h1>
<p>Given the sheer volume of possible combinations, it's crucial to implement a <b>strategic testing plan</b>:</p>
<ol type="1">
<li><b>Define Testing Objectives:</b> Clearly outline what you aim to achieve with each test (e.g., performance benchmarks, compatibility checks).</li>
<li><b>Allocate Resources:</b> Ensure you have the necessary computational resources to handle large-scale testing.</li>
<li><b>Monitor and Iterate:</b> Continuously monitor testing outcomes and refine your strategies based on findings and evolving requirements.</li>
</ol>
<p>By adopting a structured and prioritized approach, you can effectively manage the extensive testing landscape and ensure robust evaluation of your LLM combinations.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
Key Points</h2>
<ol type="1">
<li><b>Evaluator LLMs (the “grader”)</b> <br  />
<ul>
<li><b>Ollama</b> (local). <br  />
</li>
<li><b>Groq</b>. <br  />
</li>
<li><em>More evaluators planned for future releases.</em></li>
</ul>
</li>
<li><b>Student LLMs (the “respondent”)</b> <br  />
<ul>
<li><b>OpenRouter</b> (276+ models: OpenAI, Anthropic, etc.). <br  />
</li>
<li><b>Groq</b>. <br  />
</li>
<li><b>Ollama</b> (local). <br  />
</li>
<li><em>More students planned for future releases.</em></li>
</ul>
</li>
<li><b>Current Highlights</b> <br  />
<ul>
<li><b>Ollama</b> can evaluate answers from OpenRouter, Groq, or Ollama itself. <br  />
</li>
<li><b>Groq</b> can evaluate answers from OpenRouter, Groq, <b>or Ollama</b>. <br  />
</li>
<li>Ongoing development will expand these capabilities even further. <br  />
</li>
</ul>
</li>
</ol>
<p>Use this chart as a quick reference for which LLM can serve as the <b>evaluator</b> versus which can serve as the <b>student</b>. We will be testing an OpenRouter to OpenRouter impelmation in our next release. <br  />
 Below is an updated “Evaluator vs. Student” matrix that includes <b>Groq → Ollama</b> support as well.</p>
<hr  />
 <h1><a class="anchor" id="autotoc_md41"></a>
<b>Installation</b></h1>
<ol type="1">
<li><b>Clone the repository</b> <div class="fragment"><div class="line">git clone https://github.com/raymondbernard/equator.git</div>
<div class="line">cd equator</div>
</div><!-- fragment --></li>
<li><b>Download Ollama and resister at groq.com and openrouter.ai</b><ol type="a">
<li>download Ollama at <a href="https://ollama.com">https://ollama.com</a> and install</li>
<li>register and retrieve at Groq to get your api key - <a href="https://console.groq.com/keys">https://console.groq.com/keys</a></li>
<li>register and retrieve your api key at openrouter <a href="https://openrouter.ai/">https://openrouter.ai/</a></li>
</ol>
</li>
<li><b>Set Up the Environment</b><ul>
<li>Rename <code>copy-to.env</code> to <code>.env</code> in your working directory.</li>
<li>Add the necessary API keys to the <code>.env</code> file.</li>
<li>Example: <div class="fragment"><div class="line">OPENROUTER_KEY=&quot;sk-xxx&quot;</div>
<div class="line">GROQ_API_KEY=&quot;gsk_xxx&quot;</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><b>Optional: Set Up a Virtual Environment</b> It is recommended to use a virtual environment to avoid conflicts with other Python packages.</li>
</ol>
<h3><a class="anchor" id="autotoc_md42"></a>
On <b>Windows</b></h3>
<div class="fragment"><div class="line">python -m venv .venv</div>
<div class="line">.venv\Scripts\activate</div>
<div class="line">pip install equator</div>
<div class="line">deactivate</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md43"></a>
On <b>Linux/MacOS</b></h3>
<div class="fragment"><div class="line">python3 -m venv .venv</div>
<div class="line">source .venv/bin/activate</div>
<div class="line">pip install equator</div>
<div class="line">deactivate</div>
</div><!-- fragment --><ol type="1">
<li><b>Install our requirements</b> <div class="fragment"><div class="line">pip install -r requirements.txt</div>
</div><!-- fragment --><ol type="a">
<li><b>Open the main.py file.</b><ol type="i">
<li>Look at the comments in the file for directions on how to configure your test runs. It's straight forward. <br  />
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md44"></a>
Configuration</h2>
<ul>
<li><b>Execution Steps</b>: Define the steps to execute in the <code>execution_steps</code> list. Please run the application with just do one execution_step at a time and comment out the other steps. In a future release we will enable a bit more automation. <br  />
</li>
<li>Note the steps will use different models as evaluators and students. <br  />
 ie. ollama_to_groq_evaluate = ollama is the evaluator and groq is the student. Here’s a clearer and easier-to-follow version of your instructions with improved formatting and structure:</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md46"></a>
<b>IMPORTANT INSTRUCTIONS</b></h1>
<h2><a class="anchor" id="autotoc_md47"></a>
<b>Step-by-Step Execution</b></h2>
<p>To ensure everything runs smoothly, <b>please execute the program one step at a time!</b> Follow these guidelines:</p>
<ol type="1">
<li><b>Toggle Steps by Adding/Removing Comments</b> <br  />
 Modify the <code>execution_steps</code> list by uncommenting <b>one line at a time</b>. <br  />
 After running the program, re-comment the executed step if needed and proceed to the next.</li>
</ol>
<h2><a class="anchor" id="autotoc_md48"></a>
<b>Example Execution Process</b></h2>
<p>Here’s the structure of your <code>execution_steps</code> list:</p>
<div class="fragment"><div class="line">execution_steps = [</div>
<div class="line">   <span class="stringliteral">&quot;ollama_to_ollama_evaluate&quot;</span>,</div>
<div class="line">   <span class="comment"># &quot;ollama_to_groq_evaluate&quot;,  # Uncomment one line at a time, then run the program.</span></div>
<div class="line">   <span class="comment"># &quot;ollama_to_openrouter_evaluate&quot;,  # Currently working.</span></div>
<div class="line">   <span class="comment"># &quot;groq_to_ollama_evaluate&quot;,  # Currently working.</span></div>
<div class="line">   <span class="comment"># &quot;groq_to_openrouter_evaluate&quot;,  # Currently working.</span></div>
<div class="line">   <span class="comment"># &quot;generate_statistics&quot;,  # Always run last, after completing all evaluations.</span></div>
<div class="line">]</div>
</div><!-- fragment --><p> ** IMPORTANT NOTEL:**</p>
<p>If you want everything to run fully on your local machine, use the <code>ollama_to_ollama_evaluate</code> execution step. You’ll also need Docker installed, and your student model must run on Ollama inside a Docker container. You also must do an 'ollama pull &lt;student model&gt;' within your container. <br  />
</p>
<p><b>Install Docker</b> Adjust the commands below for your environment.</p>
<p>With an NVIDIA GPU *Note" you will need to install the latest drivers from NVIDIA and make sure your system recognizes your GPU. 

@icode 
https://github.com/NVIDIA/nvidia-container-toolkit
@endicode 

@icode 
docker run -d --gpus=all -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama
@endicode 

Without an NVIDIA GPU 
'''
docker run -d -v -v ollama:/root/.ollama -p 11435:11434 &amp;ndash;name ollama ollama/ollama
'''
&lt;strong&gt;Get the Ollama docker image&lt;/strong&gt;
@icode 
https://ollama.com/blog/ollama-is-now-available-as-an-official-docker-image
@endicode 

@subsection autotoc_md49 &lt;strong&gt;How to Execute&lt;/strong&gt;:
1. Choose &lt;strong&gt;one step&lt;/strong&gt; to execute by removing the &lt;tt&gt;\#&lt;/tt&gt; at the beginning of the corresponding line.
2. Run the program.
3. After the step completes, &lt;strong&gt;comment the step again&lt;/strong&gt; by re-adding the &lt;tt&gt;\#&lt;/tt&gt; if you plan to run additional steps.
4. Move to the next step and repeat.

&lt;hr&gt;

@subsection autotoc_md51 &lt;strong&gt;Order of Execution&lt;/strong&gt;
Note: you don't have to use all the steps!   You can stick to a local evaluator(ollama) and run through multiple models!! 

1. Uncomment &lt;tt&gt;"ollama_to_ollama_evaluate"&lt;/tt&gt; and run.
2. Uncomment &lt;tt&gt;"ollama_to_groq_evaluate"&lt;/tt&gt; and run.
3. Uncomment &lt;tt&gt;"ollama_to_openrouter_evaluate"&lt;/tt&gt; and run.
4. Uncomment &lt;tt&gt;"groq_to_ollama_evaluate"&lt;/tt&gt; and run.
5. Uncomment &lt;tt&gt;"groq_to_openrouter_evaluate"&lt;/tt&gt; and run.
6. Finally, ensure only &lt;tt&gt;"generate_statistics"&lt;/tt&gt; is uncommented and run to compile results.

&lt;hr&gt;

@subsection autotoc_md53 &lt;strong&gt;Tips for Success&lt;/strong&gt;
- &lt;strong&gt;One line at a time:&lt;/strong&gt; Never leave multiple steps uncommented.
- &lt;strong&gt;Save progress:&lt;/strong&gt; If something goes wrong, re-check the list and verify only one line is uncommented.
- &lt;strong&gt;Final step:&lt;/strong&gt; Always finish with &lt;tt&gt;"generate_statistics"&lt;/tt&gt; to summarize your results.

&lt;hr&gt;

This format highlights the importance of running one step at a time and makes the process easy to follow.

- &lt;strong&gt;Models&lt;/strong&gt;: Specify the models to benchmark in the respective lists.
    @icode{python} 
    student_openrouter_models = [
      "nousresearch/hermes-3-llama-3.1-405b",
    ]
    
    student_groq_models = [
      "llama3-70b-8192",
    ]

    student_ollama_models = [
      "llama3.2",
    ]
    @endicode 

- &lt;strong&gt;Benchmark Settings&lt;/strong&gt;: Adjust benchmarking parameters such as evaluator models, benchmark name, and answer rounds.
    @icode{python} 
    GROQ_EVALUATOR_MODEL = "llama3-70b-8192"
    OLLAMA_EVALUATOR_MODEL = "llama3.2"
    benchmark_name = "Bernard" answer_rounds = 2 </p>
<h2><a class="anchor" id="autotoc_md55"></a>
Logging</h2>
<p>Logs are saved to <code>vectordb.log</code> with INFO level by default.</p>
<h1><a class="anchor" id="autotoc_md56"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md57"></a>
Running the Program</h2>
<ol type="1">
<li><b>In your Python Environment</b></li>
<li><div class="fragment"><div class="line">py -m main   </div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md58"></a>
Viewing Results</h2>
<p>We create a directory named after the corresponding date to organize the benchmarks. Within this directory, you will find a collection of charts and CSV files containing statistics and token analytics.</p>
<p>Results, including scores and explanations, are saved in the specified output directory as JSON files. Each entry includes:</p><ul>
<li>Question</li>
<li>Model-generated answer</li>
<li>Evaluator response for the score</li>
<li>Score</li>
</ul>
<hr  />
 <h1><a class="anchor" id="autotoc_md60"></a>
Example Dataset</h1>
<p>The repository includes two datasets to test the reasoning capabilities of LLMs:</p>
<ol type="1">
<li><b>Default Dataset</b>:<ul>
<li>The file <code>linguistic_benchmark.json</code> contains open-ended questions across various categories, such as puzzles, spatial reasoning, and logic. This smaller dataset is ideal for quick tests or debugging. You are welcome to add more questions to the dataset or customize them for your domain.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md61"></a>
We do have a QA `linguistic_benchmark.json with over 1000+ . However, we will create a website which will pusblish our resutls using this dataset.</h1>
<p><b>Why We Keep Our Dataset Private</b></p>
<p>Our research examines the performance of large language models (LLMs) across state-of-the-art (SOTA) benchmarks, and we aim to maintain statistically significant evaluation results. If we were to release our full dataset publicly, there is a risk that future models could be trained or fine-tuned on our test items, which would compromise the fairness and meaningfulness of our benchmark. By keeping these data private, we ensure that our comparisons remain valid and our results accurately reflect model performance under unbiased test conditions.</p>
<p>Although our primary focus is maintaining a statistically significant and unbiased dataset for testing AI performance in QA reasoning and logic, we understand that different industries—such as law, medicine, or finance—have unique needs. Our linguistic_benchmark.json file can be extended to include domain-specific prompts and example responses. This approach allows you to evaluate how well AI models perform in your specialized context without compromising the integrity of our core benchmarking methodology. By adding your own questions, you can preserve our standardized evaluation framework while tailoring the tests to your field’s specific challenges. We aim to maintain a current benchmark results for our EQUATOR at equator.github.io</p>
<h1><a class="anchor" id="autotoc_md62"></a>
Contributions</h1>
<h2><a class="anchor" id="autotoc_md63"></a>
Authors</h2>
<ul>
<li>Raymond Bernard (Independent Researcher)</li>
<li>Shaina Raza, Ph.D. (Vector Institute)</li>
<li>Subhabrata Das, PhD (JP Morgan Chase)</li>
<li>Raul Murugan (Columbia University)</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md65"></a>
Future Work</h1>
<ul>
<li>Expand the vector database to include more diverse datasets.</li>
<li>Optimize the embedding and retrieval process for larger-scale deployments.</li>
<li>Investigate additional scoring criteria for complex reasoning tasks.</li>
</ul>
<hr  />
<ul>
<li><em>Acknowledgment</em>: We extend our gratitude to James Huckle for inspiring our work. <br  />
</li>
<li>We have incorporated elements from <a href="https://github.com/autogenai/easy-problems-that-llms-get-wrong">https://github.com/autogenai/easy-problems-that-llms-get-wrong</a>. <br  />
</li>
<li>Our approach advances the field by simplifying the benchmarking process through our capability to score open-ended questions effectively. <br  />
</li>
<li>Rather than benchmarking multiple models across disparate APIs, we leverage OpenRouter.ai's unified API, using the OpenAI SDK, which provides access to over 270 models for comprehensive benchmarking. <br  />
</li>
<li>## Citation If you use this framework in your research, please cite:</li>
</ul>
<div class="fragment"><div class="line">@article {bernard2024equator,</div>
<div class="line">  title        = {{EQUATOR: A Deterministic Framework for Evaluating LLM Reasoning with Open-Ended Questions. \# v1.0.0-beta}},</div>
<div class="line">  author       = {Bernard, Raymond and Raza, Shaina and Das, Subhabrata and Murugan, Rahul},</div>
<div class="line">  year         = {2024},</div>
<div class="line">  eprint       = {2501.00257},</div>
<div class="line">  archivePrefix= {arXiv},</div>
<div class="line">  primaryClass = {cs.CL},</div>
<div class="line">  note         = {MSC classes: 68T20; ACM classes: I.2.7; I.2.6; H.3.3},</div>
<div class="line">  howpublished = {arXiv preprint arXiv:2501.00257 [cs.CL]},</div>
<div class="line">  doi          = {10.48550/arXiv.2501.00257},</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md67"></a>
Contributing</h1>
<p>Contributions are welcome! Please open an issue or submit a pull request for any improvements or bug fixes.</p>
<h1><a class="anchor" id="autotoc_md68"></a>
License</h1>
<p>This project is licensed under the MIT License.</p>
<hr  />
<p><em>Generated with ❤️ by Equator QA Team</em> </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f55c696ee4af839de24e9217520ab982.html">.venv</a></li><li class="navelem"><a class="el" href="dir_59eeb8f403988ece3b0ce00b69f09b07.html">Lib</a></li><li class="navelem"><a class="el" href="dir_57fe89998858e16a6b60593775c2a86c.html">site-packages</a></li><li class="navelem"><a class="el" href="dir_5b39e5cdaf35d8b3701707508402182a.html">equator_qa</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
